<!DOCTYPE html>
<html lang="id" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title><%= title %></title>
    <meta name="description" content="<%= description %>">
    <meta name="keywords" content="<%= keywords %>">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="<%= baseUrl || 'https://dramachina.com' %>">
    <meta property="og:title" content="<%= title %>">
    <meta property="og:description" content="<%= description %>">
    <meta property="og:image" content="<%= baseUrl || 'https://dramachina.com' %>/images/og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="<%= baseUrl || 'https://dramachina.com' %>">
    <meta property="twitter:title" content="<%= title %>">
    <meta property="twitter:description" content="<%= description %>">
    <meta property="twitter:image" content="<%= baseUrl || 'https://dramachina.com' %>/images/twitter-image.jpg">
    
    <!-- PWA -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#e50914">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="DramaChina">
    <link rel="apple-touch-icon" href="/images/icon-192.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Video.js CSS -->
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/css/style.css" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    <link rel="preconnect" href="https://api.sansekai.my.id">
    <link rel="preconnect" href="https://vjs.zencdn.net">
    
    <!-- Google Analytics -->
    <% if (googleAnalyticsId) { %>
    <script async src="https://www.googletagmanager.com/gtag/js?id=<%= googleAnalyticsId %>"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '<%= googleAnalyticsId %>');
    </script>
    <% } %>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js').then(function(registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function(err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
    
    <style>
        /* Critical CSS - Load immediately */
        :root {
            --primary-color: #e50914;
            --secondary-color: #b81d24;
            --dark-bg: #141414;
            --light-bg: #1f1f1f;
            --text-color: #ffffff;
            --text-secondary: #b3b3b3;
            --card-bg: #2d2d2d;
            --trending-color: #ff6b00;
            --search-color: #00a8ff;
            --success-color: #4CAF50;
            --warning-color: #ff9800;
            --error-color: #f44336;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: var(--dark-bg);
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--dark-bg);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.3s ease;
        }
        
        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .loading-logo {
            font-size: 48px;
            color: var(--primary-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .skip-to-content {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary-color);
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 0 0 4px 0;
            z-index: 1001;
            transition: top 0.3s;
        }
        
        .skip-to-content:focus {
            top: 0;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-logo">
            <i class="fas fa-play-circle"></i>
            <h1>DramaChina</h1>
        </div>
        <div class="loading-spinner"></div>
        <p>Memuat aplikasi...</p>
    </div>
    
    <!-- Skip to Content -->
    <a href="#mainContent" class="skip-to-content">Langsung ke konten</a>
    
    <!-- Header -->
    <header id="mainHeader" class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="/" aria-label="DramaChina Home">
                        <i class="fas fa-play-circle"></i>
                        <h1>DramaChina</h1>
                    </a>
                    <span class="beta-badge">Beta</span>
                </div>
                
                <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle menu" aria-expanded="false">
                    <i class="fas fa-bars"></i>
                </button>
                
                <nav id="mainNav" class="main-nav" aria-label="Main navigation">
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="#hero" class="nav-link active" data-section="hero" aria-current="page">
                                <i class="fas fa-home"></i>
                                <span>Beranda</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#trending" class="nav-link" data-section="trending">
                                <i class="fas fa-fire"></i>
                                <span>Trending</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#latest" class="nav-link" data-section="latest">
                                <i class="fas fa-star"></i>
                                <span>Terbaru</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#popular" class="nav-link" data-section="popular">
                                <i class="fas fa-chart-line"></i>
                                <span>Populer</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#categories" class="nav-link" data-section="categories">
                                <i class="fas fa-tags"></i>
                                <span>Kategori</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/about" class="nav-link">
                                <i class="fas fa-info-circle"></i>
                                <span>Tentang</span>
                            </a>
                        </li>
                    </ul>
                    
                    <div class="nav-actions">
                        <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                            <i class="fas fa-moon"></i>
                            <span class="theme-text">Mode Gelap</span>
                        </button>
                        
                        <button class="user-menu-btn" id="userMenuBtn" aria-label="User menu">
                            <i class="fas fa-user"></i>
                        </button>
                    </div>
                </nav>
                
                <div class="search-container">
                    <div class="search-input-wrapper">
                        <input 
                            type="text" 
                            id="searchInput" 
                            class="search-input" 
                            placeholder="Cari drama, episode, atau aktor..."
                            aria-label="Search dramas"
                            autocomplete="off"
                        >
                        <button id="searchBtn" class="search-btn" aria-label="Search">
                            <i class="fas fa-search"></i>
                        </button>
                        <button id="clearSearch" class="clear-search-btn" aria-label="Clear search" style="display: none;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <!-- Search Results Dropdown -->
                    <div class="search-results" id="searchResults" role="listbox" aria-label="Search results">
                        <!-- Search results will be loaded here -->
                    </div>
                    
                    <!-- Search History -->
                    <div class="search-history" id="searchHistory">
                        <div class="search-history-header">
                            <h4><i class="fas fa-history"></i> Riwayat Pencarian</h4>
                            <button id="clearHistory" class="clear-history-btn">Hapus Semua</button>
                        </div>
                        <div class="search-history-items" id="searchHistoryItems">
                            <!-- Search history will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- User Menu Modal -->
    <div class="user-menu-modal" id="userMenuModal">
        <div class="user-menu-content">
            <div class="user-info">
                <div class="user-avatar">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="user-details">
                    <h3>Pengunjung</h3>
                    <p>Login untuk fitur lengkap</p>
                </div>
            </div>
            
            <ul class="user-menu-list">
                <li>
                    <a href="#" class="user-menu-item" id="watchHistoryBtn">
                        <i class="fas fa-history"></i>
                        <span>Riwayat Tonton</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="user-menu-item" id="favoritesBtn">
                        <i class="fas fa-heart"></i>
                        <span>Favorit</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="user-menu-item" id="downloadsBtn">
                        <i class="fas fa-download"></i>
                        <span>Download</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="user-menu-item" id="settingsBtn">
                        <i class="fas fa-cog"></i>
                        <span>Pengaturan</span>
                    </a>
                </li>
            </ul>
            
            <div class="user-menu-actions">
                <button class="login-btn" id="loginBtn">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
                <button class="register-btn" id="registerBtn">
                    <i class="fas fa-user-plus"></i> Daftar
                </button>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <main id="mainContent" class="main-content">
        <!-- Hero Section -->
        <section class="hero-section" id="hero" aria-label="Hero section">
            <div class="hero-overlay"></div>
            <div class="container">
                <div class="hero-content">
                    <h2 class="hero-title">Streaming Drama China <span class="highlight">Terlengkap</span></h2>
                    <p class="hero-description">
                        Nikmati berbagai drama China trending dan terbaru dengan subtitle Bahasa Indonesia. 
                        Streaming tanpa iklan dengan kualitas terbaik.
                    </p>
                    
                    <div class="hero-stats">
                        <div class="stat-item">
                            <i class="fas fa-film"></i>
                            <div>
                                <span class="stat-number" id="totalDramas">1000+</span>
                                <span class="stat-label">Drama</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-play-circle"></i>
                            <div>
                                <span class="stat-number" id="totalEpisodes">50,000+</span>
                                <span class="stat-label">Episode</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-users"></i>
                            <div>
                                <span class="stat-number" id="activeUsers">10,000+</span>
                                <span class="stat-label">Pengguna</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="hero-actions">
                        <button class="cta-button primary" id="exploreBtn" aria-label="Explore dramas">
                            <i class="fas fa-play-circle"></i>
                            <span>Mulai Menonton</span>
                        </button>
                        <button class="cta-button secondary" id="howToWatchBtn" aria-label="How to watch">
                            <i class="fas fa-question-circle"></i>
                            <span>Cara Menonton</span>
                        </button>
                    </div>
                    
                    <!-- Quick Categories -->
                    <div class="quick-categories">
                        <h3 class="quick-categories-title">Jelajahi Kategori:</h3>
                        <div class="category-tags">
                            <a href="#" class="category-tag" data-category="romance">
                                <i class="fas fa-heart"></i> Romantis
                            </a>
                            <a href="#" class="category-tag" data-category="fantasy">
                                <i class="fas fa-hat-wizard"></i> Fantasi
                            </a>
                            <a href="#" class="category-tag" data-category="drama">
                                <i class="fas fa-theater-masks"></i> Drama
                            </a>
                            <a href="#" class="category-tag" data-category="action">
                                <i class="fas fa-fist-raised"></i> Action
                            </a>
                            <a href="#" class="category-tag" data-category="comedy">
                                <i class="fas fa-laugh"></i> Komedi
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Search Results Section -->
        <section class="search-results-section" id="searchResultsSection" aria-label="Search results" hidden>
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title search-results-title" id="searchResultsTitle">
                        <i class="fas fa-search"></i> Hasil Pencarian
                    </h2>
                    <div class="search-meta" id="searchMeta">
                        <span id="searchCount">0 hasil ditemukan</span>
                        <button id="clearSearchResults" class="clear-btn">
                            <i class="fas fa-times"></i> Hapus Pencarian
                        </button>
                    </div>
                </div>
                
                <div class="filter-options" id="searchFilters">
                    <div class="filter-group">
                        <span class="filter-label">Filter:</span>
                        <button class="filter-btn active" data-filter="all">
                            <i class="fas fa-th-large"></i> Semua
                        </button>
                        <button class="filter-btn" data-filter="drama">
                            <i class="fas fa-film"></i> Drama
                        </button>
                        <button class="filter-btn" data-filter="episode">
                            <i class="fas fa-play-circle"></i> Episode
                        </button>
                        <button class="filter-btn" data-filter="actor">
                            <i class="fas fa-user"></i> Aktor
                        </button>
                    </div>
                    
                    <div class="sort-options">
                        <span class="sort-label">Urutkan:</span>
                        <select id="searchSort" class="sort-select" aria-label="Sort results">
                            <option value="relevance">Relevansi</option>
                            <option value="newest">Terbaru</option>
                            <option value="oldest">Terlama</option>
                            <option value="popular">Populer</option>
                            <option value="rating">Rating</option>
                        </select>
                    </div>
                </div>
                
                <div class="drama-grid" id="searchResultsGrid">
                    <!-- Search results will be loaded here -->
                </div>
                
                <div class="pagination" id="searchPagination" hidden>
                    <button class="pagination-btn prev" id="searchPrevPage" disabled>
                        <i class="fas fa-chevron-left"></i> Sebelumnya
                    </button>
                    <div class="page-numbers" id="searchPageNumbers"></div>
                    <button class="pagination-btn next" id="searchNextPage">
                        Selanjutnya <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                
                <div class="no-results" id="searchNoResults" hidden>
                    <div class="no-results-content">
                        <i class="fas fa-search"></i>
                        <h3>Tidak ada hasil ditemukan</h3>
                        <p>Coba gunakan kata kunci yang berbeda atau periksa ejaan.</p>
                        <button class="suggestions-btn" id="showSuggestions">
                            <i class="fas fa-lightbulb"></i> Lihat Saran
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Trending Section -->
        <section class="trending-section" id="trending" aria-label="Trending dramas">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title trending-title">
                        <i class="fas fa-fire"></i> Drama Trending
                        <span class="trending-badge">
                            <i class="fas fa-bolt"></i> HOT
                        </span>
                    </h2>
                    <div class="section-actions">
                        <button class="refresh-btn" id="refreshTrending" aria-label="Refresh trending">
                            <i class="fas fa-redo"></i> Refresh
                        </button>
                        <a href="/trending" class="view-all-link">
                            Lihat Semua <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
                
                <div class="drama-carousel" id="trendingCarousel">
                    <button class="carousel-btn prev" id="trendingPrev" aria-label="Previous">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    
                    <div class="carousel-container">
                        <div class="drama-grid" id="trendingGrid">
                            <div class="loading-card">
                                <div class="loading-spinner small"></div>
                                <p>Memuat drama trending...</p>
                            </div>
                        </div>
                    </div>
                    
                    <button class="carousel-btn next" id="trendingNext" aria-label="Next">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                
                <div class="trending-indicators" id="trendingIndicators">
                    <!-- Carousel indicators will be added here -->
                </div>
            </div>
        </section>
        
        <!-- Latest Section -->
        <section class="latest-section" id="latest" aria-label="Latest dramas">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title latest-title">
                        <i class="fas fa-star"></i> Drama Terbaru
                        <span class="new-badge">
                            <i class="fas fa-certificate"></i> NEW
                        </span>
                    </h2>
                    <div class="section-actions">
                        <div class="update-info">
                            <i class="fas fa-sync-alt"></i>
                            <span>Diupdate: <span id="lastUpdated">Hari ini</span></span>
                        </div>
                    </div>
                </div>
                
                <div class="filter-container" id="latestFilter">
                    <div class="filter-group">
                        <span class="filter-label">Filter Kategori:</span>
                        <button class="filter-btn active" data-filter="all">
                            <i class="fas fa-th-large"></i> Semua
                        </button>
                        <button class="filter-btn" data-filter="romance">
                            <i class="fas fa-heart"></i> Romantis
                        </button>
                        <button class="filter-btn" data-filter="drama">
                            <i class="fas fa-theater-masks"></i> Drama
                        </button>
                        <button class="filter-btn" data-filter="fantasy">
                            <i class="fas fa-hat-wizard"></i> Fantasi
                        </button>
                        <button class="filter-btn" data-filter="hot">
                            <i class="fas fa-fire"></i> Hot
                        </button>
                        <button class="filter-btn" data-filter="completed">
                            <i class="fas fa-check-circle"></i> Selesai
                        </button>
                        <button class="filter-btn" data-filter="ongoing">
                            <i class="fas fa-spinner"></i> Sedang Tayang
                        </button>
                    </div>
                    
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="grid" aria-label="Grid view">
                            <i class="fas fa-th-large"></i>
                        </button>
                        <button class="view-btn" data-view="list" aria-label="List view">
                            <i class="fas fa-list"></i>
                        </button>
                    </div>
                </div>
                
                <div class="drama-container">
                    <div class="drama-grid grid-view" id="latestGrid">
                        <div class="loading-card">
                            <div class="loading-spinner small"></div>
                            <p>Memuat drama terbaru...</p>
                        </div>
                    </div>
                    
                    <div class="drama-list list-view" id="latestList" hidden>
                        <!-- List view will be loaded here -->
                    </div>
                </div>
                
                <div class="pagination" id="latestPagination">
                    <button class="pagination-btn prev" id="latestPrevPage" disabled>
                        <i class="fas fa-chevron-left"></i> Sebelumnya
                    </button>
                    <div class="page-info">
                        Halaman <span id="currentPage">1</span> dari <span id="totalPages">1</span>
                    </div>
                    <button class="pagination-btn next" id="latestNextPage">
                        Selanjutnya <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Categories Section -->
        <section class="categories-section" id="categories" aria-label="Drama categories">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title categories-title">
                        <i class="fas fa-tags"></i> Kategori Drama
                    </h2>
                    <p class="section-subtitle">
                        Temukan drama favoritmu berdasarkan kategori
                    </p>
                </div>
                
                <div class="categories-grid" id="categoriesGrid">
                    <!-- Categories will be loaded here -->
                    <div class="loading-card">
                        <div class="loading-spinner small"></div>
                        <p>Memuat kategori...</p>
                    </div>
                </div>
                
                <div class="categories-stats">
                    <div class="stat-card">
                        <i class="fas fa-layer-group"></i>
                        <div>
                            <h3 id="totalCategories">0</h3>
                            <p>Kategori Tersedia</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-film"></i>
                        <div>
                            <h3 id="dramaPerCategory">0</h3>
                            <p>Rata-rata Drama per Kategori</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-chart-pie"></i>
                        <div>
                            <h3 id="mostPopularCategory">-</h3>
                            <p>Kategori Paling Populer</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Popular Section -->
        <section class="popular-section" id="popular" aria-label="Popular dramas">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title popular-title">
                        <i class="fas fa-chart-line"></i> Drama Populer Minggu Ini
                    </h2>
                    <div class="time-filter">
                        <span class="filter-label">Periode:</span>
                        <select id="popularTimeFilter" class="time-select" aria-label="Time period">
                            <option value="week">Minggu Ini</option>
                            <option value="month">Bulan Ini</option>
                            <option value="alltime">Sepanjang Waktu</option>
                        </select>
                    </div>
                </div>
                
                <div class="popular-dramas">
                    <div class="popular-grid" id="popularGrid">
                        <div class="loading-card">
                            <div class="loading-spinner small"></div>
                            <p>Memuat drama populer...</p>
                        </div>
                    </div>
                    
                    <div class="popular-sidebar">
                        <div class="sidebar-card">
                            <h3><i class="fas fa-trophy"></i> Top 3 Drama</h3>
                            <div class="top-list" id="topDramas">
                                <!-- Top dramas will be loaded here -->
                            </div>
                        </div>
                        
                        <div class="sidebar-card">
                            <h3><i class="fas fa-chart-bar"></i> Statistik</h3>
                            <div class="stats-list" id="popularStats">
                                <!-- Stats will be loaded here -->
                            </div>
                        </div>
                        
                        <div class="sidebar-card">
                            <h3><i class="fas fa-bell"></i> Notifikasi</h3>
                            <div class="notifications" id="notifications">
                                <div class="notification-item">
                                    <i class="fas fa-info-circle"></i>
                                    <p>Drama baru ditambahkan setiap hari!</p>
                                </div>
                                <button class="enable-notifications-btn" id="enableNotifications">
                                    <i class="fas fa-bell"></i> Aktifkan Notifikasi
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Recommended Section -->
        <section class="recommended-section" id="recommended" aria-label="Recommended dramas">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title recommended-title">
                        <i class="fas fa-heart"></i> Rekomendasi Untuk Anda
                    </h2>
                    <button class="refresh-recommendations" id="refreshRecommendations" aria-label="Refresh recommendations">
                        <i class="fas fa-redo"></i> Refresh Rekomendasi
                    </button>
                </div>
                
                <div class="recommended-dramas" id="recommendedDramas">
                    <div class="loading-card">
                        <div class="loading-spinner small"></div>
                        <p>Menganalisis preferensi Anda...</p>
                    </div>
                </div>
                
                <div class="recommendation-settings">
                    <h3><i class="fas fa-sliders-h"></i> Sesuaikan Rekomendasi</h3>
                    <div class="preference-sliders">
                        <div class="slider-item">
                            <label for="genrePreference">Preferensi Genre</label>
                            <input type="range" id="genrePreference" min="0" max="100" value="50">
                            <span class="slider-value">50%</span>
                        </div>
                        <div class="slider-item">
                            <label for="ratingPreference">Minimal Rating</label>
                            <input type="range" id="ratingPreference" min="0" max="10" step="0.5" value="7">
                            <span class="slider-value">7.0</span>
                        </div>
                        <div class="slider-item">
                            <label for="yearPreference">Tahun Rilis</label>
                            <input type="range" id="yearPreference" min="2010" max="2024" value="2020">
                            <span class="slider-value">2020</span>
                        </div>
                    </div>
                    <button class="apply-preferences" id="applyPreferences">
                        <i class="fas fa-check"></i> Terapkan Preferensi
                    </button>
                </div>
            </div>
        </section>
        
        <!-- How to Watch Guide -->
        <section class="guide-section" id="guide" aria-label="How to watch guide">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title guide-title">
                        <i class="fas fa-graduation-cap"></i> Panduan Menonton
                    </h2>
                </div>
                
                <div class="guide-steps">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <div class="step-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>Cari Drama</h3>
                        <p>Gunakan fitur pencarian untuk menemukan drama favoritmu</p>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <div class="step-icon">
                            <i class="fas fa-play-circle"></i>
                        </div>
                        <h3>Pilih Episode</h3>
                        <p>Klik pada episode yang ingin ditonton</p>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <div class="step-icon">
                            <i class="fas fa-cog"></i>
                        </div>
                        <h3>Atur Kualitas</h3>
                        <p>Pilih kualitas video sesuai kecepatan internetmu</p>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">4</div>
                        <div class="step-icon">
                            <i class="fas fa-closed-captioning"></i>
                        </div>
                        <h3>Aktifkan Subtitle</h3>
                        <p>Nyalakan subtitle Bahasa Indonesia untuk kemudahan menonton</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- App Features -->
        <section class="features-section" id="features" aria-label="App features">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title features-title">
                        <i class="fas fa-rocket"></i> Fitur Unggulan
                    </h2>
                </div>
                
                <div class="features-grid">
                    <% if (features && features.length > 0) { %>
                        <% features.forEach((feature, index) => { %>
                            <div class="feature-card">
                                <div class="feature-icon">
                                    <% if (index === 0) { %>
                                        <i class="fas fa-play-circle"></i>
                                    <% } else if (index === 1) { %>
                                        <i class="fas fa-closed-captioning"></i>
                                    <% } else if (index === 2) { %>
                                        <i class="fas fa-hd"></i>
                                    <% } else if (index === 3) { %>
                                        <i class="fas fa-ban"></i>
                                    <% } else { %>
                                        <i class="fas fa-mobile-alt"></i>
                                    <% } %>
                                </div>
                                <h3><%= feature %></h3>
                                <p>Nikmati pengalaman menonton yang lebih baik dengan fitur ini</p>
                            </div>
                        <% }); %>
                    <% } else { %>
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-play-circle"></i>
                            </div>
                            <h3>Streaming Lancar</h3>
                            <p>Streaming drama tanpa buffering dengan kualitas optimal</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-closed-captioning"></i>
                            </div>
                            <h3>Subtitle Indonesia</h3>
                            <p>Semua drama dilengkapi subtitle Bahasa Indonesia</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-hd"></i>
                            </div>
                            <h3>Kualitas HD</h3>
                            <p>Tersedia dalam berbagai kualitas hingga 720p HD</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-ban"></i>
                            </div>
                            <h3>Tanpa Iklan</h3>
                            <p>Menonton tanpa gangguan iklan</p>
                        </div>
                    <% } %>
                </div>
            </div>
        </section>
        
        <!-- Live Stats -->
        <section class="stats-section" id="stats" aria-label="Live statistics">
            <div class="container">
                <div class="live-stats">
                    <div class="stat-item live">
                        <i class="fas fa-eye"></i>
                        <div>
                            <span class="stat-number" id="liveViewers">0</span>
                            <span class="stat-label">Sedang Menonton</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-users"></i>
                        <div>
                            <span class="stat-number" id="totalVisitors">0</span>
                            <span class="stat-label">Pengunjung Hari Ini</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-film"></i>
                        <div>
                            <span class="stat-number" id="todayStreams">0</span>
                            <span class="stat-label">Streaming Hari Ini</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Footer -->
        <footer class="footer-section" id="footer" aria-label="Footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-logo">
                        <div class="logo">
                            <i class="fas fa-play-circle"></i>
                            <h2>DramaChina</h2>
                        </div>
                        <p class="tagline">Streaming Drama China Terlengkap</p>
                        <div class="social-links">
                            <a href="#" aria-label="Facebook">
                                <i class="fab fa-facebook"></i>
                            </a>
                            <a href="#" aria-label="Twitter">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="#" aria-label="Instagram">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="#" aria-label="Telegram">
                                <i class="fab fa-telegram"></i>
                            </a>
                        </div>
                    </div>
                    
                    <div class="footer-links">
                        <div class="footer-column">
                            <h3>Navigasi</h3>
                            <ul>
                                <li><a href="#hero">Beranda</a></li>
                                <li><a href="#trending">Trending</a></li>
                                <li><a href="#latest">Terbaru</a></li>
                                <li><a href="#popular">Populer</a></li>
                                <li><a href="#categories">Kategori</a></li>
                            </ul>
                        </div>
                        
                        <div class="footer-column">
                            <h3>Bantuan</h3>
                            <ul>
                                <li><a href="#guide">Panduan</a></li>
                                <li><a href="#" id="faqBtn">FAQ</a></li>
                                <li><a href="#" id="contactBtn">Kontak</a></li>
                                <li><a href="#" id="reportBtn">Lapor Masalah</a></li>
                            </ul>
                        </div>
                        
                        <div class="footer-column">
                            <h3>Legal</h3>
                            <ul>
                                <li><a href="#" id="termsBtn">Syarat & Ketentuan</a></li>
                                <li><a href="#" id="privacyBtn">Kebijakan Privasi</a></li>
                                <li><a href="#" id="dmcaBtn">DMCA</a></li>
                                <li><a href="#" id="disclaimerBtn">Disclaimer</a></li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="footer-newsletter">
                        <h3>Berlangganan Newsletter</h3>
                        <p>Dapatkan notifikasi drama baru dan update terbaru</p>
                        <div class="newsletter-form">
                            <input type="email" id="newsletterEmail" placeholder="Email Anda" aria-label="Email for newsletter">
                            <button id="subscribeBtn" class="subscribe-btn">
                                <i class="fas fa-paper-plane"></i> Berlangganan
                            </button>
                        </div>
                        <p class="newsletter-note">Kami tidak akan mengirim spam</p>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>&copy; <span id="currentYear">2024</span> DramaChina. All rights reserved.</p>
                    <div class="footer-bottom-links">
                        <a href="#" id="sitemapBtn">Peta Situs</a>
                        <a href="#" id="languageBtn">Bahasa: Indonesia</a>
                        <a href="#" id="accessibilityBtn">Aksesibilitas</a>
                    </div>
                </div>
            </div>
        </footer>
        
        <!-- Back to Top Button -->
        <button class="back-to-top" id="backToTop" aria-label="Back to top">
            <i class="fas fa-chevron-up"></i>
        </button>
    </main>
    
    <!-- Modals -->
    <!-- Video Player Modal -->
    <div class="video-modal" id="videoModal" role="dialog" aria-label="Video player" aria-modal="true" hidden>
        <div class="video-modal-content">
            <div class="video-modal-header">
                <h3 id="videoModalTitle">Video Player</h3>
                <button class="close-modal" id="closeVideoModal" aria-label="Close video">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="video-player-container">
                <div id="videoPlayer"></div>
            </div>
            <div class="video-info" id="videoInfo">
                <!-- Video info will be loaded here -->
            </div>
        </div>
    </div>
    
    <!-- Drama Detail Modal -->
    <div class="detail-modal" id="detailModal" role="dialog" aria-label="Drama details" aria-modal="true" hidden>
        <div class="detail-modal-content">
            <!-- Drama details will be loaded here -->
        </div>
    </div>
    
    <!-- About Modal -->
    <div class="about-modal" id="aboutModal" role="dialog" aria-label="About" aria-modal="true" hidden>
        <div class="about-modal-content">
            <div class="about-header">
                <h2><i class="fas fa-info-circle"></i> Tentang DramaChina</h2>
                <button class="close-modal" id="closeAboutModal" aria-label="Close about">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="about-body">
                <p>DramaChina adalah platform streaming drama China terlengkap dengan subtitle Bahasa Indonesia.</p>
                <p>Kami berkomitmen untuk menyediakan pengalaman menonton terbaik tanpa iklan dengan kualitas tinggi.</p>
                <div class="version-info">
                    <p><strong>Versi:</strong> Beta 1.0.0</p>
                    <p><strong>Terakhir Update:</strong> <span id="appVersionDate">Januari 2024</span></p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Contact Modal -->
    <div class="contact-modal" id="contactModal" role="dialog" aria-label="Contact" aria-modal="true" hidden>
        <div class="contact-modal-content">
            <div class="contact-header">
                <h2><i class="fas fa-envelope"></i> Hubungi Kami</h2>
                <button class="close-modal" id="closeContactModal" aria-label="Close contact">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="contact-body">
                <form id="contactForm">
                    <div class="form-group">
                        <label for="contactName">Nama</label>
                        <input type="text" id="contactName" required aria-required="true">
                    </div>
                    <div class="form-group">
                        <label for="contactEmail">Email</label>
                        <input type="email" id="contactEmail" required aria-required="true">
                    </div>
                    <div class="form-group">
                        <label for="contactSubject">Subjek</label>
                        <input type="text" id="contactSubject" required aria-required="true">
                    </div>
                    <div class="form-group">
                        <label for="contactMessage">Pesan</label>
                        <textarea id="contactMessage" rows="5" required aria-required="true"></textarea>
                    </div>
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-paper-plane"></i> Kirim Pesan
                    </button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Notification Toast -->
    <div class="toast-container" id="toastContainer" role="alert" aria-live="polite">
        <!-- Toast notifications will be added here -->
    </div>
    
    <!-- JavaScript -->
    <!-- Video.js -->
    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
    
    <!-- Custom JS -->
    <script src="/js/app.js"></script>
    <script src="/js/search.js"></script>
    <script src="/js/player.js"></script>
    <script src="/js/utils.js"></script>
    
    <script>
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year in footer
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            // Hide loading screen
            setTimeout(() => {
                document.getElementById('loadingScreen').classList.add('hidden');
            }, 1000);
            
            // Initialize theme
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            
            // Update theme button text
            const themeText = document.querySelector('.theme-text');
            if (themeText) {
                themeText.textContent = savedTheme === 'dark' ? 'Mode Gelap' : 'Mode Terang';
            }
            
            // Set initial live stats
            updateLiveStats();
            
            // Load initial data
            loadTrendingDramas();
            loadLatestDramas();
            loadCategories();
            loadPopularDramas();
            loadRecommendedDramas();
        });
        
        // Function to update live stats
        function updateLiveStats() {
            const liveViewers = Math.floor(Math.random() * 500) + 100;
            const totalVisitors = Math.floor(Math.random() * 1000) + 500;
            const todayStreams = Math.floor(Math.random() * 10000) + 5000;
            
            document.getElementById('liveViewers').textContent = liveViewers.toLocaleString();
            document.getElementById('totalVisitors').textContent = totalVisitors.toLocaleString();
            document.getElementById('todayStreams').textContent = todayStreams.toLocaleString();
        }
        
        // Update live stats every 30 seconds
        setInterval(updateLiveStats, 30000);
        
        // Event listeners for interactive elements
        document.getElementById('themeToggle').addEventListener('click', function() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            const themeText = document.querySelector('.theme-text');
            if (themeText) {
                themeText.textContent = newTheme === 'dark' ? 'Mode Gelap' : 'Mode Terang';
            }
            
            // Update icon
            const icon = this.querySelector('i');
            icon.className = newTheme === 'dark' ? 'fas fa-moon' : 'fas fa-sun';
        });
        
        // Back to top button
        const backToTop = document.getElementById('backToTop');
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                backToTop.style.display = 'block';
            } else {
                backToTop.style.display = 'none';
            }
        });
        
        backToTop.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        // Mobile menu toggle
        document.getElementById('mobileMenuBtn').addEventListener('click', function() {
            const nav = document.getElementById('mainNav');
            const isExpanded = this.getAttribute('aria-expanded') === 'true';
            
            this.setAttribute('aria-expanded', !isExpanded);
            nav.classList.toggle('active');
        });
        
        // User menu toggle
        document.getElementById('userMenuBtn').addEventListener('click', function() {
            const modal = document.getElementById('userMenuModal');
            modal.style.display = 'block';
        });
        
        // Close modals when clicking outside
        window.addEventListener('click', function(event) {
            const userModal = document.getElementById('userMenuModal');
            if (event.target === userModal) {
                userModal.style.display = 'none';
            }
            
            const videoModal = document.getElementById('videoModal');
            if (event.target === videoModal) {
                videoModal.setAttribute('hidden', 'true');
            }
            
            const detailModal = document.getElementById('detailModal');
            if (event.target === detailModal) {
                detailModal.setAttribute('hidden', 'true');
            }
        });
        
        // Close modals with ESC key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                document.getElementById('userMenuModal').style.display = 'none';
                document.getElementById('videoModal').setAttribute('hidden', 'true');
                document.getElementById('detailModal').setAttribute('hidden', 'true');
            }
        });
        
        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                    
                    // Update active nav link
                    document.querySelectorAll('.nav-link').forEach(link => {
                        link.classList.remove('active');
                    });
                    this.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>
